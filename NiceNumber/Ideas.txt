****** КОНЦЕПЦИЯ ******

Сделать игру, смысл которой в поиске закономерностей в ряде цифр (находить цифры/числа, подчиняющиеся определенной закономерности)





*** Версия 1 ***

+Закономерности (BD):
+ (BD) Арифметические прогрессии: найти все пары чисел (позиций), сгруппированные по d, отсортировать по первой позиции и вычленить последовательно прогрессии (сложно, но реализуемо и сложность алгоритма ниже)
+ (BD) Зеркальные цифры: найти все повторяющиеся цифры, рекуррентно искать в направлении сближения другие дважды повторяющиеся цифры (переиспользовать текущий алгоритм поиска прогрессий); 
                  учитывать только те, у которых длина не меньше 2-х
+ (BD) Кратные числа: искать все пары чисел (включая цифры, кроме единиц), которые делятся без остатка одно на другое). 
               Возможно стоит отсекать те варианты, которые при добавлении любой цифры слева все равно будут делиться без остатка 
               (например, при делении на 2 оставлять только 1-значные, на 4, 5, 10, 20, 25 - 2-значные и т.д., кроме случаев, когда числа оканчиваются нулем(-ями) - тогда будет знаков как нулей плюс еще один)
+ (BD) Геометрические прогрессии: найти все пары чисел, сгруппированные по q (исключая не целые q), отсортировать по первой позиции и вычленить последовательно прогрессии - аналогично арифметическим, но с отсечением
+ (BD) Одинаковые числа (должны считаться, как отдельная закономерность)

+Логика: 

+ (BD) подтипы прогрессий из основных алгоритмов
+ алгоритм начисления очков за закономерности разной сложности

Интерфейс: 
+_i_ (FD) изучить клиентские технологии, которые было бы целесообразно использовать для реализации игры в браузере (Angular)
+ (FD, BD) автогенерация числа для игры по кнопке "старт" 
+ (FD, BD) отдавать количество закономерностей разных вышеуказанных типов с сервера
+ (FD, BD) кнопка "проверить" для каждого вида закономерностей
+ (FD, BD) сохранять рекорд количества выявленных закономерностей на сервере, авторизовать пользователя через куки
+ (FD, BD) таблицы вывода найденных закономерностей, заполняющиеся автоматически при совпадении
+ (FD) - переработать таблицы с числами, сделать одну таблицу
+ (FD) реализовать таймер для игры 



*** Версия 1.1 ***

Доработки:
+ Рядом с кнопкой "Завершить игру" добавить кнопку "Показать ненайденные" (закономерности), после нажатия которой отображаются все закономерности, которые не найдены в процессе игры
+ Рядом с кнопкой "Завершить игру" добавить кнопку "Подсказать", при нажатии на которую будут выделяться цифры случайной ненайденной закономерности и блокироваться кнопки типов закономерностей, кроме типа текущей "подсказанной"
+ После завершения игры вместо кнопки "Завершить игру" будет кнопка "Завершить сеанс", которая после подтверждения обнулит все текущие данные игрового сеанса и вернет игрока на экран с кнопкой "Начать игру"
+ Рядом с каждой кнопкой закономерности сделать кнопку подсказки, которая будет находить закономерность выбранного типа
+ Рядом с каждым числом закономерности сделать кнопку подсказки, которая будет находить закономерность выбранного типа с заданным числом закономерности
+ Отсортировать числа закономерности по возрастанию
+ Кнопка включения-отключения подсказок

Ошибки:
+ Удалить геометрические прогрессии с шагом 0



*** Версия 1.2 ***

Доработки:
+ переделать алерты и конфирмы на попапы Angular Material
+ Сделать таблицу рекордов с разбиением на день, неделю, месяц и все время
+ Добавить диалог ввода имени пользователя и произвольной ссылки, которые будут отображаться в таблице рекордов
+ Закрыть технический долг по определению играемых закономерностей (отдельный класс, обновляющий поле-флаг закономерности)
+ Сделать подробное описание игры
+ Написать, что такое закономерность (на главной, вместе с описанием игры)
+ Написать, где между элементами закономерности могут быть произвольные расстояния
+ Для геометрической прогрессии отображать не 0.33333 а 1/3 в качестве числа-подсказки
+ Описать диапазон чисел-подсказок (от - 100 до -1 и от 0.01 до 100)
+ В результатах отображать соединенные цифры в числа
+ Записать обучающий видеоролик на youtube и встроить его в страницу "Об игре"

Ошибки:
+ Для арифметических прогрессий неверный расчет суммы очков при отрицательной разности прогрессии
+ исправить ошибку для одинаковых чисел, обозначенную в модульном тесте



*** Версия 1.3 ***

Доработки:
+ Вместо идентификатора сессии (который постоянно меняется) ввести идентификатор анонимного пользователя (GUID, записывающийся в куки)
+ Сохранять/загружать никнейм и ссылку (в куки либо в базу анонимных пользователей)
+ Закрыть технический долг по валидации при сохранении никнейма для таблицы рекордов (+регексп для имени и ссылки)
+ Завершать игру, если все закономерности найдены или подсказаны
+ Добавить очки за досрочное окончание игры (1 очко за каждую оставшуюся секунду, но не более, чем половина от набранных очков за закономерности).



*** Версия 1.4 ***

Доработки:
+ Пересмотреть планы для второй и третьей версии, почистить список идей от бесперспективных и неактуальных
+ (BA, FD, BD) разработать уровни сложности для игры (количество цифр, например "легкий" - 7-8, "нормальный" - 9-10, "тяжелый" - 11-12)
+ Добавить подпись "число-подсказка" для таблицы с прогрессом игры
+ Сделать так, чтобы шрифт подсказки типа закономерности был больше, и чтобы подсказка отображалась дольше, чем в текущей версии (сейчас 3-5 сек)
+ Подготовка игры к рекламированию

Ошибки:
? сделать так, чтобы одинаковые цифры и одинаковые числа искались независимо, изменить описания подсказок



*** Версия 1.5 (обучение) ***

Доработки:
+ Продумать обучение по игре (последовательность чисел с мининмально необходимым количеством закономерностей) 
+ Продумать проверку знаний типов закономерностей на предварительно сгенерированных числах
+ Продумать возможность вводить числа ограниченной длины под заданный набор закономерностей и, возможно, чисел-подсказок

Уровень 1 (знакомство с возможностями игры), задания:

+ 1. кнопка "Понятно" после прочтения описания
+ 2. фокус на строке таблицы с типом закономерности и прогрессом по данному типу
+ 3. выделение предлагаемых цифр числа
+ 4. нажатие на "Проверить" нужного типа
+ 5. тултипы для типов закономерностей (все должны быть прокликаны)
+ 6. кнопка "Убрать кнопки-подсказки"
+ 7. кнопка "Вернуть кнопки-подсказки"
+ 8. подсказка-вопрос для одинаковых цифр + нажатие на "Проверить"
+ 9. случайная подсказка для одинаковых цифр + нажатие на "Проверить"
+ 10. случайная подсказка (для одинаковых чисел/зеркальных цифр) + нажатие на "Проверить"
+ 11. кнопка "Завершить игру"
+ 12. кнопка "Показать ненайденные закономерности"/"ок" после завершения игры

Для каждого типа закономерностей разработать следующие подуровни:
- Подуровень 1: одна-две закономерность одного типа с 1-2 лишними цифрами
- Подуровень 2: три-четыре закономерности одного типа, некоторые из которых не связаны между собой, с 2-3 лишними цифрами
- Подуровень 3: проверка знания дополнительного правила по данному типу:
    - Зеркальные цифры: не обязательно должны быть расположены рядом.
    - Кратные числа: правило "если при добавлении к большему числу любой цифры спереди оно автоматически будет кратным, то считается меньшее" (для множителей 2, 5 и их произведений)
    - Кратные числа: пользоваться подсказкой (добавьте/удалите одну/несколько цифр)
    - Арифметическая прогрессия и Геометрическая прогрессия: строятся слева направо, ищутся в соответствии с числом-подсказкой

+ нужные элементы управления подсвечиваются во время обучения (анимированными границами, фоном)
+ оверлей всего экрана (затененный экран), кроме нужных элементов управления
+ кнопка "Задание", открывающая попап с текстом описания текущего задания и анимацией, пока все задания не выполнены
+ кнопка "На следующий уровень" с анимацией, включающейся, когда все задания выполнены
+ вывод информации о прогрессе обучения

- автоскроллинг к подсвечиваемому элементу управления

Улучшения:
- рядом с "завершить сеанс" сделать кнопку "начать новую игру" с сообщением "начать новую игру на уровне сложности х?"
либо:
- сделать кнопку "начать новую игру" с кастомным попапом "начать новую игру на уровне сложности х?" и кнопками "ок" и "выбрать уровень сложности"

- продублировать в описании игры информацию о числах подсказках
- написать в описании, что "для найденной закономерности отображается число-подсказка, соответствующее ей, в столбце под названием типа закономерности"
- написать "Обращайте внимание на числа-подсказки", "Закономерности строятся слева направо", "Числа неразрывны"
- предлагать после игры перейти к рекордам выбранного уровня сложности за сегодня
- окно-подтверждение для случайных подсказок заданного типа
- обновлять имя и ссылку для пустых более ранних записей с одной и той же сессией, если игрок ввел свое имя и(или) ссылку в последней игре
- сделать кнопки "Кратко" и "Подробно" на странице "Об игре"

- сделать возможность скрывать найденные закономерности для выбранного типа
связано с:
- возможность открывать найденные закономерности одного типа с автоскрытием найденных закономерностей всех остальных типов

* директива angular для передачи имени контрола и параметров, необходимых для отдачи класса (перенести в раздел технического долга)

*******************************************************************************************
Технический план для 1-го уровня (удалить после реализации):
+ объект уровня хранить в JSON в БД
+ то, что не получается хранить в БД, хранить в виде обособленного кода
+ перенести код, связанный с обучением, в отдельный унаследованный класс-компонент
+ сделать начало игры и обучение разными кнопками на отдельном шаблоне
+ сделать два уровня для одинаковых цифр, ввести нужные обобщения
+ оверлей: выделенный контрол над ним, возможность для задачи указать контролы над ним (через классы)
*******************************************************************************************



*** Версия 1.6 (улучшенное обучение) ***

Доработки:
- ввод числа с 1-2 (в зависимости от сложности типа) закономерностями заданного типа
- уровни и задачи можно пропускать и затем возвращаться к ним

Улучшения:
- сделать возможность выбора типа закономерности в процессе игры (кнопка с состоянием зажатия), и одну кнопку "Проверить" и "Подсказать"
- завершение игры на сервере, если игра была начата давно


*** Версия 1.7 (авторизация SSO) ***
- возможность обновить имя для всех сыгранных ранее игр
- при малом количестве очков предложить пройти обучение, если оно еще не пройдено для текущего игрока
- предлагать перейти к рекордам после сыгранной игры



*** Версия 2 (сетевая игра) ***
- 




*** Версия 3 (монетизация) ***

Идеи на рассмотрение:
* платная подсказка: выбираешь цифру, и все закономерности с ней становятся найденными
* платная подсказка: заблокировать цифру для соперников до тех пор, пока не будут выбраны всеми игроками закономерности без этой цифры
* платные подсказки: кроме заданного количества "удалите/добавьте одну/несколько цифр" можно докупать на игру
* платная подсказка: получить половину от расчетных очков за полностью подсказанную закономерность (одна на всю игру)
* платная подсказка: выделять цифры среди найденных закономерностей при выделении их в исходном (верхнем) числе (одна на всю игру)


? сделать подсказку о том, что закономерность уже найдена, выводя при необходимости уже существующую часть подсказки об удалении/добавлении цифр
? возможность для игроков генерировать числа (и зарабатывать очки за них???)

??? Ограничить число подсказок, выдаваемых автоматически при несовпадении с найденной закономерностью (по типам либо всего за игру)
??? При подсказке учитывать выделенные цифры (возможно начислять неполное количество очков)
??? В исходном числе дать возможность объединять цифры в числа, возможно выделением мышкой
??? Возможность выбрать то же самое число, что было сыграно рекордсменом (с отключением всех подсказок)
??? Ограничить количество очков, которое можно заработать, текущей суммой очков (было бы актуально для усложнения стратегии в сетевой игре)
??? СУПЕРФИЧА: ПО ИСКЛЮЧЕНИИ ВСЕХ ЗАКОНОМЕРНОСТЕЙ ИГРА ПРОДОЛЖАЕТСЯ С НОВЫМ ЧИСЛОМ

Закономерности (BD):
- (BD) Числа квази-Фибоначчи (3-е число равно 1-му плюс 2-му, 4-е 2-му плюс 1-му и т.д.
- (BD) Точки полинома второй степени (минимум 3), перебрать коэффициенты - может не сработать по производительности, понадобятся дополнительные отсечения
- (BD) Среднее арифметическое вместе с рядом с этим показателем
- (BD) Среднее геометрическое вместе с рядом с этим показателем
- (BD) Среднее гармоническое (?) вместе с рядом с этим показателем


Логика:
* (BD) сделать более полное покрытие тестами серверной логики
- сбалансировать алгоритм начисления очков за закономерности разной сложности
- (BA) продумать и реализовать аналитику собранных данных для игры


Интерфейс:
-_i_ (BA) выяснить, сколько секунд нужно в среднем для нахождения закономерностей в 12-ти значном числе
- (FD) анимация "найденная закономерность" с выводом подтипа
-_i_ (BA) изучить то, какой функционал есть в подобных логических играх
-_i_ (BA) изучить то, какой дизайн бывает в подобных логических играх
- (FD) подключить гугл аналитику
- (FD) адаптировать игру под мобильные устройства
- (FD) добавить новые закономерности на клиент
- (BA, DES, FD) разработать новый дизайн для клиента




